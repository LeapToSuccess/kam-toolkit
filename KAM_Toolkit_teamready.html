<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>KAM Toolkit — Team Workspace</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet" />
<style>
  :root{ --primary:#B80D0D; --ink:#e5e7eb; --muted:#cbd5e1; }
  *{box-sizing:border-box} html,body{height:100%}
  body{
    font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif; margin:0; color:var(--ink);
    background: radial-gradient(1200px 600px at 20% -10%, rgba(184,13,13,.35), transparent 40%),
                radial-gradient(900px 500px at 110% 10%, rgba(34,197,94,.20), transparent 35%),
                linear-gradient(180deg,#0b1220 0%, #0f172a 100%);
  }
  .shell{max-width:1200px;margin:28px auto;padding:0 20px}
  .role-banner{
    position:sticky; top:0; z-index:1200; margin-bottom:10px; padding:10px 14px; border-radius:12px;
    background:linear-gradient(90deg, rgba(184,13,13,.35), rgba(14,165,233,.25));
    border:1px solid rgba(255,255,255,.14); color:#fff; display:flex; align-items:center; justify-content:space-between; backdrop-filter: blur(6px);
  }
  .role-banner .home{ text-decoration:none; color:#fff; font-weight:700; border:1px solid rgba(255,255,255,.25); padding:6px 10px; border-radius:10px; }
  .hero{
    position:relative; border-radius:22px; padding:28px; overflow:hidden;
    background:linear-gradient(135deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.06), 0 20px 60px rgba(0,0,0,.35);
    backdrop-filter: blur(8px); margin-bottom: 40px;
  }
  .title{display:flex; align-items:center; gap:16px}
  .logo{height:44px;width:44px;border-radius:12px; background: conic-gradient(from 120deg,var(--primary),#ef4444,#f59e0b,#22c55e,#0ea5e9,#818cf8,var(--primary)); box-shadow:0 6px 30px rgba(248,113,113,.35)}
  h1{margin:0; font-weight:800; letter-spacing:.2px; font-size:28px}
  .subtitle{margin:8px 0 0; color:var(--muted)}
  .card{border:1px solid rgba(255,255,255,.08); border-radius:18px; padding:18px; margin-top:18px; background:linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.02))}
  .foot{display:flex; align-items:center; justify-content:space-between; gap:16px; margin-top:18px; color:#cbd5e1}
  .btn{appearance:none; border:0; padding:10px 14px; border-radius:12px; font-weight:800; color:#0b1220; background:linear-gradient(90deg,#fca5a5,#f59e0b); box-shadow:0 10px 24px rgba(245,158,11,.35); cursor:pointer}
  @media print{
    *{-webkit-print-color-adjust:exact; print-color-adjust:exact}
    body *{ visibility: hidden !important; }
    body[data-print] section.hero{ display:none !important; }
    body[data-print] section.hero#print-target{ display:block !important; }
    body[data-print] section.hero#print-target, body[data-print] section.hero#print-target *{ visibility: visible !important; }
    section.hero#print-target{ position: absolute; left: 0; top: 0; right:0; margin:0; box-shadow:none; }
    textarea{ height:auto !important; overflow:visible !important; white-space:pre-wrap !important; }
  }
  textarea,input,select{width:100%; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12); color:var(--ink); border-radius:12px; padding:10px 12px; outline:none; font-size:13px}
  textarea{min-height:110px; resize:vertical}
</style>
</head>
<body>
<div class="shell">
  <div class="role-banner">
    <span class="info">Workspace: <strong>T1</strong> • Role: <strong>participant</strong></span>
    <a class="home" href="KAM_Landing.html">⇦ Back to Teams</a>
  </div>

  <!-- SAMPLE SECTION (you can add the rest later) -->
  <section class="hero" id="stakeholder">
    <div class="title">
      <div class="logo"></div>
      <div>
        <h1>Stakeholder Mapping – Strategic Canvas</h1>
        <p class="subtitle">Map power, support, and engagement plays for your account.</p>
      </div>
    </div>
    <div class="card">
      <h2>Engagement notes</h2>
      <textarea placeholder="Champions / Decision-makers / Allies / Blockers..."></textarea>
    </div>
    <div class="foot">
      <div>LeapToSuccess © 2025 • Stakeholder Mapping Canvas</div>
      <div><button class="btn" data-print-section="stakeholder">Print / Save this Section</button></div>
    </div>
  </section>
</div>

<script>
// Role/Team from URL params + local autosave + print-this-section
(function(){
  const p = new URLSearchParams(location.search);
  const team = (p.get('team')||'T1').toUpperCase();
  const role = (p.get('role')||'participant').toLowerCase();
  const banner = document.querySelector('.role-banner .info');
  if (banner) banner.innerHTML = 'Workspace: <strong>' + team + '</strong> • Role: <strong>' + role + '</strong>';
  const NS = 'KAM:' + team + ':' + role + ':';

  function restore(){
    const els = document.querySelectorAll('textarea,input,select');
    els.forEach((el, idx)=>{
      const key = NS + (el.name || el.id || ('el' + idx));
      const val = localStorage.getItem(key);
      if(val !== null){ el.value = val; }
    });
  }
  let t;
  function saveNow(el, idx){
    const key = NS + (el.name || el.id || ('el' + idx));
    try{ localStorage.setItem(key, el.value); }catch(e){}
  }
  function onChange(e){
    if(!e.target.matches('textarea,input,select')) return;
    const els = [...document.querySelectorAll('textarea,input,select')];
    const idx = els.indexOf(e.target);
    clearTimeout(t); t = setTimeout(()=> saveNow(e.target, idx), 180);
  }
  document.addEventListener('input', onChange, true);
  document.addEventListener('change', onChange, true);
  window.addEventListener('load', restore);

  function printSectionById(id){
    const sec = document.getElementById(id);
    if(!sec) return;
    const clone = sec.cloneNode(true);
    clone.id = 'print-target';
    document.body.appendChild(clone);
    document.body.setAttribute('data-print','1');
    window.print();
    setTimeout(()=>{
      document.body.removeAttribute('data-print');
      if(clone && clone.parentNode) clone.parentNode.removeChild(clone);
    }, 0);
  }
  document.addEventListener('click', function(e){
    const btn = e.target.closest('button[data-print-section]');
    if(!btn) return;
    e.preventDefault();
    printSectionById(btn.getAttribute('data-print-section'));
  });
})();
</script>
</body>
</html>
